<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Tic Tac Toe</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <style>
        /*
            make html element into 100% height "flex" element so we can more
            easily center the board & title
        */
        html {
            display: flex;
            height: 100%;
            justify-content: center;
            align-items: center;
            font-family: Helvetica, Arial, sans-serif;
        }
        
        /*
            The title for our game
        */
        .title {
            text-align: center;
            margin: -15px 0 35px 0;
            font-size: 30px;
        }
        
        /*
            Board will hold a grid of divs, "table" is an easy way to manage a
            grid
        */
        .board {
            display: table;
            table-layout: fixed;
        }
        
        /*
            a "cell" in our game is a single square
        */
        .board-cell {
            display: table-cell;
            border: 1px solid darkgray;
            height: 100px;
            width: 100px;
            text-align: center;
            line-height: 100px;
            font-size: 60px;
            font-weight: bold;
        }
        
        /*
            Remove the top border from all cells in the first row
        */
        .board-row:first-child .board-cell {
            border-top: 0;
        }
        
        /*
            Remove the bottom border from all cells in the last row
        */
        .board-row:last-child .board-cell {
            border-bottom: 0;
        }
        
        /*
            Remove the left border from all first cells in each row
        */
        .board-row .board-cell:first-child {
            border-left: 0;
        }
        
        /*
            Remove the right border from all last cells in each row
        */
        .board-row .board-cell:last-child {
            border-right: 0;
        }
    </style>
    <script>
        var turnNumber = 0; // even number turns are X's; odd number turns are O's
    
        // clickHandler receives the position of the square which was clicked
        function clickHandler(pos) {
            // print the position to console
            console.log(pos);
            
            var $thisSquare = $(".board-cell").eq(3*pos.row + pos.column);
            // check if square is empty

            if ($thisSquare.html() != "") {
                alert("Hey, this square is already taken");
                // stop here so player can choose again
                return;
            }
            if (turnNumber % 2 == 0) {
                $thisSquare.html("X");
            } else {
                $thisSquare.html("O");
            }
            
            // advance the turn counter to switch between X and O
            turnNumber++;
        }
    
        /*
            $(document).ready() waits until the page is ready to be modified
        */
        $(document).ready(function() {
            var numRows = 3;
            var numColumns = 3;
        
            // use two for loops to add all the divs needed for the board
            for (var i = 0; i < numRows; i++) {
                // each row begins with a <div class="board-row">
                var $row = $("<div class='board-row'></div>");
                
                for (var j = 0; j < numColumns; j++) {
                    // add a cell to the new row
                    var $cell = $("<div class='board-cell'></div>");
                    // add a click handler for this cell, and pass it data
                    // about which cell it is
                    $cell.on("click", { row: i, column: j }, function(event) {
                        clickHandler(event.data);
                    });
                    $row.append($cell);
                }
                
                $(".board").append($row);
            }
        });
    </script>
</head>

<body>
    <div class="title">Tic Tac Toe</div>

    <div class="board"></div>
</body>

</html>
